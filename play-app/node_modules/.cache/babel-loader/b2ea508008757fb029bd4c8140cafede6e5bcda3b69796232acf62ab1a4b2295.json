{"ast":null,"code":"import _objectSpread from\"C:/Users/Justi/Desktop/Web3Assignment1/WebIII_Assign1/play-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/Justi/Desktop/Web3Assignment1/WebIII_Assign1/play-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Justi/Desktop/Web3Assignment1/WebIII_Assign1/play-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useLocalStorage}from\"../Hooks/useLocalStorage\";import{useEffect,useState}from\"react\";import Tabs from\"./Tabs\";import Loader from\"react-loader-spinner\";import'./DetailView.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Tab=function Tab(props){var _useLocalStorage=useLocalStorage(props.id,null),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),play=_useLocalStorage2[0],setPlay=_useLocalStorage2[1];var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isFetching=_useState2[0],stopFetching=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),buttons=_useState4[0],changeButtons=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),tabProps=_useState6[0],changeTabProps=_useState6[1];var checkButtons=function checkButtons(){if(props.play.filename===\"\"){changeButtons([\"Details\"]);}else{changeButtons([\"Details\",\"Characters\",\"Text\"]);}};useEffect(function(){var url=\"https://www.randyconnolly.com//funwebdev/3rd/api/shakespeare/play.php?name=\".concat(props.id);//url to fetch data with props id\nif(play===null&&props.play.filename!==\"\"){fetch(url).then(function(resp){if(resp.ok){return resp.json();}else{throw new Error(\"Fetch failed\");}}).then(function(data){setPlay(data);checkButtons();changeTabProps({details:props.play,tabName:\"Details\"});stopFetching(false);}).catch(function(error){return console.error(error);});}else{stopFetching(false);checkButtons();changeTabProps({details:props.play,tabName:\"Details\"});}},[props.id,play,setPlay,props.play]);var handleTabChange=function handleTabChange(e){if(e.target.innerHTML===\"Details\"){changeTabProps({details:props.play,tabName:\"Details\"});props.tabState(e.target.innerHTML);}else if(e.target.innerHTML===\"Characters\"){changeTabProps({details:play.persona,tabName:\"Characters\"});props.tabState(e.target.innerHTML);}else if(e.target.innerHTML===\"Text\"){changeTabProps({details:play.acts,tabName:\"Text\"});var acts=[];var scenes=[];var char=play.persona.map(function(p){return p.player;});play.acts.forEach(function(a){acts.push(a.name);a.scenes.forEach(function(s){scenes.push(s);});});props.tabState(e.target.innerHTML,acts,_toConsumableArray(new Set(scenes.map(function(s){return s.name;}))),char);}};if(isFetching)return/*#__PURE__*/_jsx(Loader,{type:\"Circles\",color:\"#00BFFF\",height:\"50vh\",width:\"50vh\"});else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"tabs\",children:buttons.map(function(b){return/*#__PURE__*/_jsx(\"button\",{onClick:handleTabChange,children:b});})}),/*#__PURE__*/_createElement(Tabs,_objectSpread(_objectSpread({},tabProps),{},{key:props.id}))]});}};export default Tab;","map":{"version":3,"sources":["C:/Users/Justi/Desktop/Web3Assignment1/webiii_assign1/play-app/src/Components/Tab.js"],"names":["useLocalStorage","useEffect","useState","Tabs","Loader","Tab","props","id","play","setPlay","isFetching","stopFetching","buttons","changeButtons","tabProps","changeTabProps","checkButtons","filename","url","fetch","then","resp","ok","json","Error","data","details","tabName","catch","error","console","handleTabChange","e","target","innerHTML","tabState","persona","acts","scenes","char","map","p","player","forEach","a","push","name","s","Set","b"],"mappings":"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","sourcesContent":["import {useLocalStorage} from \"../Hooks/useLocalStorage\";\r\nimport {useEffect, useState} from \"react\";\r\nimport Tabs from \"./Tabs\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport './DetailView.css';\r\n\r\nconst Tab = (props)=>{\r\n\r\n    const [play, setPlay] = useLocalStorage(props.id, null);\r\n    const [isFetching, stopFetching] = useState(true);\r\n    const [buttons, changeButtons] = useState([]);\r\n    const [tabProps, changeTabProps] = useState({})\r\n    \r\n    const checkButtons = ()=>{\r\n        if (props.play.filename === \"\"){\r\n            changeButtons([\"Details\"]);\r\n        } else {\r\n            changeButtons([\"Details\", \"Characters\", \"Text\"]);\r\n        }\r\n    }\r\n    useEffect(()=> {\r\n        const url = `https://www.randyconnolly.com//funwebdev/3rd/api/shakespeare/play.php?name=${props.id}`; //url to fetch data with props id\r\n        if (play === null && props.play.filename !== \"\"){\r\n            fetch(url)\r\n                .then(resp=>{\r\n                    if (resp.ok) {\r\n                        return resp.json();\r\n                    }\r\n                    else {\r\n                        throw new Error(\"Fetch failed\");\r\n                    }\r\n                }).then(data=>{\r\n                setPlay(data);\r\n                checkButtons();\r\n                changeTabProps({details: props.play, tabName: \"Details\"});\r\n                stopFetching(false);\r\n            })\r\n                .catch(error=>console.error(error));\r\n        } else {\r\n            stopFetching(false);\r\n            checkButtons();\r\n            changeTabProps({details: props.play, tabName: \"Details\"});\r\n        }\r\n\r\n    }, [props.id, play, setPlay, props.play]);\r\n\r\n    const handleTabChange = (e)=>{\r\n        if(e.target.innerHTML === \"Details\") {\r\n            changeTabProps({details: props.play, tabName: \"Details\"});\r\n            props.tabState(e.target.innerHTML);\r\n        }else if(e.target.innerHTML === \"Characters\") {\r\n            changeTabProps({details: play.persona, tabName: \"Characters\"});\r\n            props.tabState(e.target.innerHTML);\r\n        }else if(e.target.innerHTML === \"Text\") {\r\n            changeTabProps({details: play.acts, tabName: \"Text\"});\r\n            let acts = [];\r\n            let scenes = [];\r\n            const char = play.persona.map(p=>p.player);\r\n            play.acts.forEach(a=>{\r\n                acts.push(a.name);\r\n                a.scenes.forEach(s=>{\r\n                    scenes.push(s);\r\n                })\r\n            })\r\n            props.tabState(e.target.innerHTML, acts, [...new Set(scenes.map(s=>s.name))], char);\r\n        }\r\n    }\r\n    if (isFetching)\r\n        return <Loader type=\"Circles\" color=\"#00BFFF\" height=\"50vh\" width=\"50vh\"/>\r\n    else {\r\n        return (\r\n            <div>\r\n                <span className=\"tabs\">{buttons.map(b => <button onClick={handleTabChange}>{b}</button>)}</span>\r\n                <Tabs {...tabProps} key = {props.id}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Tab;"]},"metadata":{},"sourceType":"module"}